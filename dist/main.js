(()=>{"use strict";(e=>{let t=null,l=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),r=document.querySelector(".timer-action");function a(){const e=(new Date("9 sept 2021")-new Date)/1e3;e<=0&&(r.textContent="Акция завершенна",clearInterval(t));const a=e>0?Math.floor(e/60/60)%24:0,c=e>0?Math.floor(e/60)%60:0,s=e>0?Math.floor(e)%60:0;l.textContent=a<10?"0"+a:a,o.textContent=c<10?"0"+c:c,n.textContent=s<10?"0"+s:s}a(),t=setInterval(a,1e3)})(),(()=>{let e=document.querySelector(".menu"),t=document.querySelector("menu"),l=t.querySelectorAll("ul li a");const o=()=>{t.classList.toggle("active-menu")},n=document.querySelectorAll('a[href^="#"]');for(let e of n)e.addEventListener("click",(function(t){t.preventDefault();const l=e.getAttribute("href");document.querySelector(l).scrollIntoView({behavior:"smooth",block:"start"})}));e.addEventListener("click",o);for(let e=0;e<l.length;e++)t.addEventListener("click",(t=>{("close-btn"===t.target.className||t.target===l[e])&&o()}))})(),(()=>{let e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),l=document.querySelectorAll(".popup-btn"),o=e.querySelectorAll("input"),n=document.documentElement.clientWidth;l.forEach((l=>{l.addEventListener("click",(()=>{if(e.style.display="block",n>768){let e=Date.now(),l=setInterval((()=>{let o=Date.now()-e;t.style.top=o/2+"px",o>400&&clearInterval(l)}),1)}}))}));const r=()=>{for(let e=0;e<o.length;e++)o[e].value="",o[e].style.boxShadow="none"};e.addEventListener("click",(t=>{let l=t.target;l.classList.contains("popup-close")?(e.style.display="none",r()):(l=l.closest(".popup-content"),l||(e.style.display="none",r()))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,n)=>{e===o&&(e=>{for(let o=0;o<l.length;o++)e===o?(t[o].classList.add("active"),l[o].classList.remove("d-none")):(t[o].classList.remove("active"),l[o].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),l=document.querySelector(".portfolio-dots");let o=t.length-1;for(let e=0;e<=o;e++){let e=document.createElement("li");l.appendChild(e),e.classList.add("dot")}const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let r=0,a=setInterval;const c=(e,t,l)=>{e[t].classList.remove(l)},s=(e,t,l)=>{e[t].classList.add(l)},u=()=>{c(t,r,"portfolio-item-active"),c(n,r,"dot-active"),r++,r>=t.length&&(r=0),s(t,r,"portfolio-item-active"),s(n,r,"dot-active")},i=(e=3e3)=>{a=setInterval(u,e)};e.addEventListener("click",(e=>{e.preventDefault();let l=e.target;l.matches("#arrow-right, #arrow-left, .dot")&&(c(t,r,"portfolio-item-active"),c(n,r,"dot-active"),l.matches("#arrow-right")?r++:l.matches("#arrow-left")?r--:l.matches(".dot")&&n.forEach(((e,t)=>{e===l&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),s(t,r,"portfolio-item-active"),s(n,r,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(2e3)})(),(()=>{let e=document.querySelectorAll(".command__photo");for(let t=0;t<e.length;t++){let l=e[t].getAttribute("src");e[t].addEventListener("mouseover",(function(){event.target.src=event.target.dataset.img})),e[t].addEventListener("mouseout",(function(){event.target.src=l}))}})(),(()=>{const e=document.querySelectorAll(".calc-block input");for(let t=0;t<e.length;t++)e[t].addEventListener("input",(function(){e[t].value=e[t].value.replace(/[^\d.]/g,"")}));const t=document.getElementsByName("user_form"),l=document.getElementsByName("user_name"),o=document.getElementsByName("user_email"),n=document.getElementsByName("user_phone"),r=document.querySelector(".mess");document.querySelectorAll("form button");for(let e=0;e<t.length;e++)t[e].addEventListener("input",(t=>{"user_name"!==t.target.name&&"user_email"!==t.target.name&&"user_message"!==t.target.name||(l[e].value=l[e].value.replace(/[^а-яё\ ]/gi,""),o[e].value=o[e].value.replace(/[^a-z0-9\-_.!@~*']/gi,""),o[e].value=o[e].value.replace(/\w+@\w+\.\w{4,4}/gi,""),r.value=r.value.replace(/[^а-яё0-9,.!?:;\ ]/g,""))})),[].forEach.call(n,(function(e){var t;function l(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var l="+7 (___) ___ ____",o=0,n=l.replace(/\D/g,""),r=this.value.replace(/\D/g,""),a=l.replace(/[_\d]/g,(function(e){return o<r.length?r.charAt(o++)||n.charAt(o):e}));-1!=(o=a.indexOf("_"))&&(o<5&&(o=3),a=a.slice(0,o));var c=l.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(c=new RegExp("^"+c+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",l,!1),e.addEventListener("focus",l,!1),e.addEventListener("blur",l,!1),e.addEventListener("keydown",l,!1)})),l[e].onblur=()=>{let t;l[e].value.length<2?l[e].style.boxShadow="0 0 15px red":l[e].style.boxShadow="none",/  +/.test(l[e].value)&&(t=l[e].value.replace(/  +/g," ").replace(/^\s+/g,"").replace(/\s*$/,""),l[e].value=t),t=l[e].value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1))).join(" "),l[e].value=t},o[e].onblur=()=>{/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(o[e].value)?o[e].style.boxShadow="none":o[e].style.boxShadow="0 0 15px red"},n[e].onblur=()=>{n[e].value.length<12?n[e].style.boxShadow="0 0 15px red":n[e].style.boxShadow="none"};r.onblur=function(){if(/--+/.test(r.value)||/  +/.test(r.value)){let e=r.value.replace(/--+/g," - ").replace(/  +/g," ").replace(/^\s+/g,"").replace(/\s*$/,"").replace(/^-+/g,"").replace(/-*$/,"");r.value=e}}})(),((e=100)=>{const t=document.querySelector(".calc-block"),l=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("change",(t=>{const c=t.target;(c.matches("select")||c.matches("input"))&&(()=>{let t=0,c=1,s=1;const u=l.options[l.selectedIndex].value,i=+o.value;""===u&&(o.value="",n.value="",r.value=""),n.value>1&&(c+=(n.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),u&&i&&(t=e*u*i*c*s),a.textContent=Math.round(t)})()}))})(100),(()=>{const e=document.getElementsByName("user_form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;";for(let l=0;l<e.length;l++){e[l].addEventListener("submit",(n=>{n.preventDefault();const r=e[l].querySelectorAll("input"),a=e[l].querySelector(".form-name"),c=e[l].querySelector(".form-email"),s=e[l].querySelector(".form-phone");for(let e=0;e<r.length;e++)if(""===r[e].value)return void alert("Все поля должны быть заполненны! Заполние оставшиеся поля и повторите отправку.");if(a.value.length<2||!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(c.value)||s.value.length<12)return void alert("Вы ввели неверные значения! Повторите попытку");const u=document.querySelector(".popup"),i=document.querySelector("form:not([class])");e[l]===i&&(t.style.cssText="color: white;"),e[l].appendChild(t),t.textContent="Загрузка...";const d=new FormData(e[l]);let m={};for(let e of d.entries())m[e[0]]=e[1];o(m).then((o=>{if(200!==o.status)throw new Error("status network not 200");t.textContent="Спасибо! Мы скоро свами свяжимся!",e[l].reset()})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)})),setTimeout((function(){t.remove(),u.style.display="none"}),5e3)}));const o=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}})()})();