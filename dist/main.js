(()=>{"use strict";(e=>{let t=null,o=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds"),r=document.querySelector(".timer-action");function a(){const e=(new Date("13 sept 2021")-new Date)/1e3;e<=0&&(r.textContent="Акция завершенна",clearInterval(t));const a=e>0?Math.floor(e/60/60)%24:0,c=e>0?Math.floor(e/60)%60:0,s=e>0?Math.floor(e)%60:0;o.textContent=a<10?"0"+a:a,l.textContent=c<10?"0"+c:c,n.textContent=s<10?"0"+s:s}a(),t=setInterval(a,1e3)})(),(()=>{let e=document.querySelector(".menu"),t=document.querySelector("menu"),o=t.querySelectorAll("ul li a");const l=()=>{t.classList.toggle("active-menu")},n=document.querySelectorAll('menu ul a[href^="#"]');for(let e of n)e.addEventListener("click",(function(t){t.preventDefault();const o=e.getAttribute("href");document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));const r=document.querySelector('main a[href^="#"]');r.addEventListener("click",(function(e){e.preventDefault();const t=r.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})})),e.addEventListener("click",l);for(let e=0;e<o.length;e++)t.addEventListener("click",(t=>{("close-btn"===t.target.className||t.target===o[e])&&l()}))})(),(()=>{let e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),l=e.querySelectorAll("input"),n=document.documentElement.clientWidth;o.forEach((o=>{o.addEventListener("click",(()=>{if(e.style.display="block",n>768){let e=Date.now(),o=setInterval((()=>{let l=Date.now()-e;t.style.top=l/2+"px",l>400&&clearInterval(o)}),1)}}))}));const r=()=>{for(let e=0;e<l.length;e++)l[e].value="",l[e].style.boxShadow="none"};e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?(e.style.display="none",r()):(o=o.closest(".popup-content"),o||(e.style.display="none",r()))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let l=e.target;l=l.closest(".service-header-tab"),l&&t.forEach(((e,n)=>{e===l&&(e=>{for(let l=0;l<o.length;l++)e===l?(t[l].classList.add("active"),o[l].classList.remove("d-none")):(t[l].classList.remove("active"),o[l].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-dots");let l=t.length-1;for(let e=0;e<=l;e++){let e=document.createElement("li");o.appendChild(e),e.classList.add("dot")}const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let r=0,a=setInterval;const c=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},u=()=>{c(t,r,"portfolio-item-active"),c(n,r,"dot-active"),r++,r>=t.length&&(r=0),s(t,r,"portfolio-item-active"),s(n,r,"dot-active")},i=(e=3e3)=>{a=setInterval(u,e)};e.addEventListener("click",(e=>{e.preventDefault();let o=e.target;o.matches("#arrow-right, #arrow-left, .dot")&&(c(t,r,"portfolio-item-active"),c(n,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),s(t,r,"portfolio-item-active"),s(n,r,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(2e3)})(),(()=>{let e=document.querySelectorAll(".command__photo");for(let t=0;t<e.length;t++){let o=e[t].getAttribute("src");e[t].addEventListener("mouseover",(function(){event.target.src=event.target.dataset.img})),e[t].addEventListener("mouseout",(function(){event.target.src=o}))}})(),(()=>{const e=document.querySelectorAll(".calc-block input");for(let t=0;t<e.length;t++)e[t].addEventListener("input",(function(){e[t].value=e[t].value.replace(/[^\d.]/g,"")}));const t=document.getElementsByName("user_form"),o=document.getElementsByName("user_name"),l=document.getElementsByName("user_email"),n=document.getElementsByName("user_phone"),r=document.querySelector(".mess");document.querySelectorAll("form button");for(let e=0;e<t.length;e++)t[e].addEventListener("input",(t=>{"user_name"!==t.target.name&&"user_email"!==t.target.name&&"user_message"!==t.target.name||(o[e].value=o[e].value.replace(/[^а-яё\ ]/gi,""),l[e].value=l[e].value.replace(/[^a-z0-9\-_.!@~*']/gi,""),l[e].value=l[e].value.replace(/\w+@\w+\.\w{4,4}/gi,""),r.value=r.value.replace(/[^а-яё0-9,.!?:;\ ]/g,""))})),[].forEach.call(n,(function(e){var t;function o(e){e.keyCode&&(t=e.keyCode),this.selectionStart<3&&e.preventDefault();var o="+7 (___) ___ ____",l=0,n=o.replace(/\D/g,""),r=this.value.replace(/\D/g,""),a=o.replace(/[_\d]/g,(function(e){return l<r.length?r.charAt(l++)||n.charAt(l):e}));-1!=(l=a.indexOf("_"))&&(l<5&&(l=3),a=a.slice(0,l));var c=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(c=new RegExp("^"+c+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",o,!1),e.addEventListener("focus",o,!1),e.addEventListener("blur",o,!1),e.addEventListener("keydown",o,!1)})),o[e].onblur=()=>{let t;o[e].value.length<2?o[e].style.boxShadow="0 0 15px red":o[e].style.boxShadow="none",/  +/.test(o[e].value)&&(t=o[e].value.replace(/  +/g," ").replace(/^\s+/g,"").replace(/\s*$/,""),o[e].value=t),t=o[e].value.split(" ").map((e=>e[0].toUpperCase()+e.slice(1))).join(" "),o[e].value=t},l[e].onblur=()=>{/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(l[e].value)?l[e].style.boxShadow="none":l[e].style.boxShadow="0 0 15px red"},n[e].onblur=()=>{n[e].value.length<12?n[e].style.boxShadow="0 0 15px red":n[e].style.boxShadow="none"};r.onblur=function(){if(/--+/.test(r.value)||/  +/.test(r.value)){let e=r.value.replace(/--+/g," - ").replace(/  +/g," ").replace(/^\s+/g,"").replace(/\s*$/,"").replace(/^-+/g,"").replace(/-*$/,"");r.value=e}}})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=document.querySelector(".calc-square"),n=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("change",(t=>{const c=t.target;(c.matches("select")||c.matches("input"))&&(()=>{let t=0,c=1,s=1;const u=o.options[o.selectedIndex].value,i=+l.value;""===u&&(l.value="",n.value="",r.value=""),n.value>1&&(c+=(n.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),u&&i&&(t=e*u*i*c*s),a.textContent=Math.round(t)})()}))})(100),(()=>{const e=document.getElementsByName("user_form"),t=document.createElement("div");t.style.cssText="font-size: 2rem;";for(let o=0;o<e.length;o++){e[o].addEventListener("submit",(n=>{n.preventDefault();const r=e[o].querySelectorAll("input"),a=e[o].querySelector(".form-name"),c=e[o].querySelector(".form-email"),s=e[o].querySelector(".form-phone");for(let e=0;e<r.length;e++)if(""===r[e].value)return void alert("Все поля должны быть заполненны! Заполние оставшиеся поля и повторите отправку.");if(a.value.length<2||!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(c.value)||s.value.length<12)return void alert("Вы ввели неверные значения! Повторите попытку");const u=document.querySelector(".popup"),i=document.querySelector("form:not([class])");e[o]===i&&(t.style.cssText="color: white;"),e[o].appendChild(t),t.textContent="Загрузка...";const d=new FormData(e[o]);let m={};for(let e of d.entries())m[e[0]]=e[1];l(m).then((l=>{if(200!==l.status)throw new Error("status network not 200");t.textContent="Спасибо! Мы скоро свами свяжимся!",e[o].reset()})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)})),setTimeout((function(){t.remove(),u.style.display="none"}),5e3)}));const l=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}})()})();